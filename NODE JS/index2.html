<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX XMLHTTPREQUEST</title>
    <p id="demo"></p>
    <button onclick="func()">CLICK</button>
</head>

<body>


    <script>
        const demo = document.querySelector('#demo')
        const func = () => {
            const http = new XMLHttpRequest()
            const method = 'GET'
            const url = 'https://api.github.com/users/ANKITKUMARBARIK'
            http.open(method, url, true)

            http.onreadystatechange = () => {
                console.log(http.readyState)
                if (http.readyState === XMLHttpRequest.DONE && http.status === 200) {
                    const data = JSON.parse(http.responseText)
                    console.log(typeof data)
                    console.log(http.readyState)
                    console.log(data.login)
                    console.log(data.followers)
                    demo.innerHTML = data.login
                } else if (http.readyState === XMLHttpRequest.DONE && http.status !== 200) {
                    console.log('Error !');
                } else {
                    console.log('Something went wrong !')
                }
            }
            http.send()
        }


        // EXPLAIN 👆🏻 CODE :-->

        // const http = new XMLHttpRequest() :
        // A new XMLHttpRequest object is created and assigned to the variable http.
        // This object is used to send requests to the server and handle the responses.

        // const url = 'https://api.github.com/users/ANKITKUMARBARIK' :
        // This is the API URL to which the request will be sent.
        // The URL contains details about a GitHub user with the username ANKITKUMARBARIK.

        // const method = 'GET' :
        // The HTTP method is set to GET.
        // The GET method is used to retrieve data from the server.

        // http.open(method, url) :
        // The open() method initializes the request.
        // It sets the HTTP method (GET) and the target URL.
        // At this point, the request is prepared but not yet sent to the server.

        // http.onreadystatechange :
        // This is an event handler that triggers whenever the readyState of the request changes.
        // It is used to check whether the request has been completed or not.
        // ReadyState Conditions:

        // http.readyState === XMLHttpRequest.DONE :
        // This confirms that the request has been fully processed (ReadyState 4).

        // http.status === 200 :
        // This ensures that the request was successfully completed and the server returned a 200 OK response.

        // http.send() :
        // This sends the request to the server.
        // After this, the logic inside onreadystatechange is executed.

        // Parsing the Response :
        // The response from the server (responseText) is received as a JSON string.
        // The JSON.parse() method converts this JSON string into a JavaScript object for further processing.
    </script>
</body>

</html>